{{ define "head" }}
<script src='https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.11/index.global.min.js'></script>
<script src='https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@6.1.11/index.global.min.js'></script>
<script src='https://cdn.jsdelivr.net/npm/@fullcalendar/list@6.1.11/index.global.min.js'></script>
<script src='https://cdn.jsdelivr.net/npm/@fullcalendar/bootstrap5@6.1.11/index.global.min.js'></script>
<script src='https://cdn.jsdelivr.net/npm/@fullcalendar/google-calendar@6.1.11/index.global.min.js'></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      googleCalendarApiKey: '{{ .Params.api_key }}',
      initialView: 'listMonth',
      events: {
        googleCalendarId: '{{ .Params.google_calendar_id }}',
      },
      themeSystem: 'bootstrap5',
      firstDay: 1,
      headerToolbar: {right: 'dayGridMonth,listMonth today prev,next'},
      listDayFormat: {weekday: 'long', day: 'numeric', month: 'long', year: 'numeric'},
      listDaySideFormat: null,
      views: {
        list: {
          eventContent: function(arg) {
            let title = arg.event._def.title;
            let location = arg.event._def.extendedProps.location;
            let url = arg.event._def.url;
            if (location) {
              return {html: `<a href="${url}"><b>${title}</b><br/><small class="text-muted">${location}</small></a>`};
            }
            else {
              return {html: `<a href="${url}"><b>${title}</b></a>`};
            }
          }
        }
      },
      validRange: function(nowDate) { return {start: nowDate}; }
    });
    calendar.render();
  });
</script>
<style>
  .fc-toolbar button, .fc-event {text-transform: capitalize;}
</style>
{{ end }}
{{ define "main" }}
<div id='calendar'></div>
{{ end }}
